---
import Layout from "src/layouts/MainLayout.astro";
import events from "../events.json";
import linkify from "linkify-string";

const addressToLink = (address: string) =>
  "https://www.google.com/maps/search/" +
  new URLSearchParams({ api: "1", query: encodeURIComponent(address) });
---

<Layout title="Events | Jeremiah Lockwood" active="events">
  <h1>Events</h1>
  <main>
    {
      events.length ? (
        events.map(({ title, date, address, description, long }) => (
          <div class:list={["event", { long }]}>
            <p>{date}</p>
            <p>{title}</p>
            {address && (
              <p>
                <a href={addressToLink(address)}>{address}</a>
              </p>
            )}
            {description.map((paragraph) => (
              <p set:html={linkify(paragraph)} />
            ))}
          </div>
        ))
      ) : (
        <p>No upcoming events right now.</p>
      )
    }
  </main>
</Layout>
