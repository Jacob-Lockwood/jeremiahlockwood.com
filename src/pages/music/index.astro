---
import MainLayout from "../../layouts/MainLayout.astro";
import { getEntryBySlug } from "astro:content";

const pages = await Promise.all(
  [
    "sway-machinery",
    "gordon-lockwood",
    "golden-ages",
    "solo",
    "book-of-j",
    "composer-for-film-and-video",
    "fraternal-order-of-the-society-blues",
    "discography",
  ].map((slug) => getEntryBySlug("music", slug)),
);
---

<MainLayout title="Music | Jeremiah Lockwood" active="music">
  <main>
    <h1>Music</h1>
    <div class="split">
      <figure>
        <iframe
          src="https://www.youtube.com/embed/d00yCDSjc_8"
          frameborder="0"
          allowfullscreen></iframe>
        <figcaption>Rozo D'Shabbos, The Sway Machinery</figcaption>
      </figure>
      <figure>
        <iframe
          src="https://www.youtube.com/embed/T1T3gzkj6bY"
          frameborder="0"
          allowfullscreen></iframe>
        <figcaption>Live at Sweetwater Music Hall, 2019</figcaption>
      </figure>
    </div>
    <div class="split">
      <blockquote>
        <p>
          <q>
            The musical story of Jeremiah Lockwood is almost hard to believe.
            His early musical development was guided by his grandfather, a
            Jewish cantor, and Carolina Slim, a well-known blues guitarist. All
            those influences crystallize into something unified.
          </q>
          -- Joe Tangari, Pitchfork
        </p>
      </blockquote>
      <blockquote>
        <p>
          <q>
            Jeremiah Lockwood &mldr; grew up with two disparate musical mentors.
            As a boy, Lockwood sang in the choir of his grandfather, Jacob
            Konigsberg, a renowned cantor who led the High Holidays services at
            the Loop Synagogue, in Chicago, for several decades. When he was
            fourteen, Lockwood began a lifelong apprenticeship with the
            legendary Piedmont blues master guitarist Carolina Slim, which
            mainly consisted of busking alongside the impeccably dressed Slim in
            Manhattan subway stations.
          </q>
          -- The New Yorker
        </p>
      </blockquote>
    </div>
    <div class="grid">
      {
        pages.map(
          (entry) =>
            entry && (
              <div class="post">
                <a href={`/music/${entry.slug}`}>
                  <img src={entry.data.image} alt={entry.data.title} />
                  <div class="card">
                    <h3>{entry.data.title}</h3>
                    {entry.data.previewText && <p>{entry.data.previewText}</p>}
                  </div>
                </a>
              </div>
            ),
        )
      }
    </div>
  </main>
</MainLayout>

<style>
  main {
    margin: 0;
    padding: 0;
  }
  h1 {
    text-align: center;
  }
  .grid {
    padding: 1em;
    display: grid;
    gap: 1em;
    grid-template-columns: repeat(3, 1fr);
  }
  .post {
    border: 1px solid;
    position: relative;
    overflow: hidden;
    aspect-ratio: 1 / 1;
  }
  .post .card {
    color: black;
    padding: 1em;
    background: hsl(0 15% 80% / 0.9);
    position: absolute;
    z-index: 5;
    inset: 0 0 auto 0;
    width: 100%;
    height: 100%;
    transform: translateY(-100%);
    transition: transform 300ms;
    overflow: hidden;
  }
  .post .card h3 {
    margin-bottom: 0.5rem;
  }
  .post .card p {
    font-size: clamp(0.4rem, 1vw + 0.5rem);
  }
  .post img {
    width: 100%;
    height: 100%;
    object-fit: cover;
  }
  .post:hover .card {
    transform: none;
  }

  @media screen and (max-width: 1100px) {
    .post .card {
      transform: none;
      height: auto;
    }
  }

  @media screen and (max-width: 700px) {
    .grid {
      grid-template-columns: 1fr 1fr;
      /* aspect-ratio: 1 / 2; */
    }
    .post .card p {
      display: none;
    }
  }

  aside {
    font-size: 1.5em;
    line-height: 1.2em;
    margin: 5em auto;
    max-width: clamp(30ch, 75vw, 70ch);
  }

  blockquote p {
    font-size: 1.3em;
  }
</style>
